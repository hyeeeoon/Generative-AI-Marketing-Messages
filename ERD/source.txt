// ==========================================
// ğŸ“˜ ê³µí†µ í…Œì´ë¸”
// ==========================================

Table userInfo {
  id long [primary key, increment, note: 'ì‚¬ìš©ì ê³ ìœ  ID']
  username varchar [note: 'ì‚¬ìš©ì ì´ë¦„']
  userId varchar [unique, not null, note: 'ë¡œê·¸ì¸ ID']
  password varchar [not null, note: 'ì•”í˜¸í™” ì €ì¥']
  role varchar [note: 'admin ë˜ëŠ” ktcs_user ê¶Œí•œ êµ¬ë¶„']
  organization varchar [note: 'ì†Œì† ê¸°ê´€ëª… (KT CS ë“±)']
  createdAt timestamp
}

Table loginLogs {
  id long [primary key, increment, note: 'ë¡œê·¸ì¸ ì´ë ¥ ê³ ìœ  ID']
  userId long [not null, note: 'userInfo.id ì°¸ì¡°']
  loginTime timestamp
  success boolean [note: 'ë¡œê·¸ì¸ ì„±ê³µ ì—¬ë¶€']
  ipAddress varchar [note: 'ë¡œê·¸ì¸ IP ì£¼ì†Œ']
}

// ê´€ê³„ ì„¤ì •: ë¡œê·¸ì¸ ë¡œê·¸ â†’ ì‚¬ìš©ì
Ref: loginLogs.userId > userInfo.id


// ==========================================
// ğŸ“‚ KT CS (ê³ ê°ì‚¬) ì£¼ìš” í…Œì´ë¸”
// ==========================================

Table Customer {
  id long [primary key, increment, note: 'ê³ ê° ê³ ìœ  ID']
  name varchar [note: 'ê³ ê° ì´ë¦„']
  age int [note: 'ë‚˜ì´']
  gender varchar [note: 'ì„±ë³„']
  phone varchar [note: 'ì—°ë½ì²˜']
  joinDate date [note: 'ê°€ì…ì¼']
  status varchar [note: 'í™œì„±, í•´ì§€, ì—°ì²´ ë“± ìƒíƒœ']
}

Table Usage_History {
  id long [primary key, increment, note: 'ì´ë ¥ ê³ ìœ  ID']
  customerId long [not null, note: 'Customer.id ì°¸ì¡°']
  month varchar [note: 'ì´ìš©ì›” (YYYY-MM í˜•ì‹)']
  dataUsage float [note: 'ë°ì´í„° ì‚¬ìš©ëŸ‰ (GB)']
  paymentStatus varchar [note: 'ë‚©ë¶€ ì™„ë£Œ, ë¯¸ë‚©, ì—°ì²´ ë“±']
  cancellationDate date [note: 'í•´ì§€ì¼ (í•´ì§€ ì‹œë§Œ ê¸°ë¡)']
}

// ê³ ê°ë³„ ì´ìš© ì´ë ¥ ê´€ê³„
Ref: Usage_History.customerId > Customer.id


Table Service {
  id long [primary key, increment, note: 'ì„œë¹„ìŠ¤ ID']
  name varchar [note: 'ìš”ê¸ˆì œ / ë¶€ê°€ì„œë¹„ìŠ¤ëª…']
  description text [note: 'ì„œë¹„ìŠ¤ ì„¤ëª…']
  price decimal [note: 'ìš”ê¸ˆ (ì›” ë‹¨ìœ„)']
  isActive boolean [note: 'í˜„ì¬ íŒë§¤ ì—¬ë¶€']
}

Table Segment {
  id long [primary key, increment, note: 'ì„¸ê·¸ë¨¼íŠ¸ ê³ ìœ  ID']
  name varchar [note: 'ì„¸ê·¸ë¨¼íŠ¸ëª… (ì˜ˆ: OTT ì´ìš© 20ëŒ€)']
  criteria text [note: 'ì„¸ê·¸ë¨¼íŠ¸ êµ¬ì„± ê¸°ì¤€ (SQL í˜¹ì€ ì¡°ê±´ì‹ í˜•íƒœ)']
  createdAt timestamp
}

Table Message {
  id long [primary key, increment, note: 'ë©”ì‹œì§€ ê³ ìœ  ID']
  segmentId long [not null, note: 'Segment.id ì°¸ì¡°']
  serviceId long [note: 'Service.id ì°¸ì¡°']
  generatedBy varchar [note: 'ì‚¬ìš©ëœ AI ëª¨ë¸ëª… ë˜ëŠ” ë²„ì „']
  content text [note: 'AIê°€ ìƒì„±í•œ ë©”ì‹œì§€ ë‚´ìš©']
  createdAt timestamp
}

// ë©”ì‹œì§€ â†” ì„¸ê·¸ë¨¼íŠ¸ / ì„œë¹„ìŠ¤ ê´€ê³„
Ref: Message.segmentId > Segment.id
Ref: Message.serviceId > Service.id


Table Message_Log {
  id long [primary key, increment, note: 'ë©”ì‹œì§€ ë¡œê·¸ ê³ ìœ  ID']
  messageId long [not null, note: 'Message.id ì°¸ì¡°']
  customerId long [not null, note: 'Customer.id ì°¸ì¡°']
  sentAt timestamp [note: 'ë°œì†¡ ì‹œê°']
  isDelivered boolean [note: 'ì„±ê³µì ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€']
  isClicked boolean [note: 'í´ë¦­ / ë°˜ì‘ ì—¬ë¶€']
}

// ë©”ì‹œì§€ ë¡œê·¸ ê´€ê³„
Ref: Message_Log.messageId > Message.id
Ref: Message_Log.customerId > Customer.id


// ==========================================
// ğŸ“‚ AI ì§€ì¹¨ ê´€ë ¨ (í•µì‹¬ êµ¬ì¡°)
// ==========================================

Table AI_Guideline_Admin {
  id long [primary key, increment, note: 'ê¸°ë³¸ AI ì§€ì¹¨ ê³ ìœ  ID']
  title varchar [note: 'ì§€ì¹¨ ì œëª© (ì˜ˆ: ê¸°ë³¸ ê¸ˆì§€ì–´ ì„¸íŠ¸ v1.0)']
  tone text [note: 'ê¸°ë³¸ í†¤ / ë¬¸ì²´']
  forbidden_words text [note: 'ê¸ˆì§€ì–´ ëª©ë¡ (JSON ë°°ì—´ í˜•íƒœ)']
  description text [note: 'ì§€ì¹¨ ì„¤ëª…']
  createdAt timestamp
}

Table AI_Guideline_Client {
  id long [primary key, increment, note: 'ê³ ê°ì‚¬ AI ì§€ì¹¨ ê³ ìœ  ID']
  clientId long [not null, note: 'userInfo.id ì°¸ì¡° (ê³ ê°ì‚¬ ê³„ì •)']
  baseGuidelineId long [note: 'AI_Guideline_Admin.id ì°¸ì¡° (ê¸°ë³¸ ì§€ì¹¨ ì°¸ê³ ìš©)']
  added_tone text [note: 'ì¶”ê°€ í†¤ / ë¬¸ì²´']
  added_forbidden_words text [note: 'ì¶”ê°€ ê¸ˆì§€ì–´ ëª©ë¡ (JSON ë°°ì—´ í˜•íƒœ)']
  description text [note: 'ì¶”ê°€ ì§€ì¹¨ ì„¤ëª…']
  createdAt timestamp
}

// ê´€ê³„: ê³ ê°ì‚¬ ì§€ì¹¨ì€ ê¸°ë³¸ ì§€ì¹¨ì„ ì°¸ê³  + ì‚¬ìš©ì ê³„ì • ì—°ê²°
Ref: AI_Guideline_Client.baseGuidelineId > AI_Guideline_Admin.id
Ref: AI_Guideline_Client.clientId > userInfo.id


// ==========================================
// ğŸ“‚ ê´€ë¦¬ì(ìš´ì˜ì) ìª½ ì£¼ìš” í…Œì´ë¸”
// ==========================================

Table Model_Info {
  id long [primary key, increment, note: 'ëª¨ë¸ ê´€ë¦¬ ID']
  model_name varchar [note: 'ëª¨ë¸ ì´ë¦„ (ì˜ˆ: GPT-4-turbo)']
  version varchar [note: 'ë²„ì „ ì •ë³´']
  api_endpoint varchar [note: 'API ì—”ë“œí¬ì¸íŠ¸ ì£¼ì†Œ']
  description text [note: 'ëª¨ë¸ ì„¤ëª…']
  createdAt timestamp
}

Table Customer_Segment {
  id long [primary key, increment, note: 'ë§¤í•‘ ID']
  customerId long [not null, note: 'Customer.id ì°¸ì¡°']
  segmentId long [not null, note: 'Segment.id ì°¸ì¡°']
}

// ë‹¤ëŒ€ë‹¤ ê´€ê³„ ë§¤í•‘
Ref: Customer_Segment.customerId > Customer.id
Ref: Customer_Segment.segmentId > Segment.id


Table System_Log {
  id long [primary key, increment, note: 'ì‹œìŠ¤í…œ ë¡œê·¸ ID']
  log_type varchar [note: 'ì •ì œ, ì˜¤ë¥˜, ëª¨ë¸ì‹¤í–‰ ë“± êµ¬ë¶„']
  message text [note: 'ë¡œê·¸ ë‚´ìš©']
  createdAt timestamp
}
